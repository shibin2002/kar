<%- include('partials/header') %>

<main
  class="projects-section"
  style="
    padding-top: 80px;
    background-image: url('assets/img/hero-bg.jpg');
    background-size: cover;
    background-position: center;
  "
>
  <div class="container">
    <h2
      class="section-title"
      style="
        text-align: center;
        margin-bottom: 30px;
        color: #f1f1f1;
        font-family: 'Poppins', sans-serif;
      "
    >
      Our Projects
    </h2>
    <div
      class="projects-grid"
      id="projects-container"
      style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px"
    >
      <% projects.forEach(project => { %>
      <div
        class="project-card"
        style="
          background: #2b2b2b;
          border: 1px solid #000000;
          padding: 20px;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          transition: transform 0.3s;
        "
      >
        <h3
          style="
            font-size: 20px;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 10px;
          "
        >
          <%= project.name %>
        </h3>
        <p
          style="
            font-size: 14px;
            color: #ffffff;
            line-height: 1.6;
            margin-bottom: 15px;
          "
        >
          <%= project.description %>
        </p>
        <% if (project.image) { %>
        <img
          src="<%= project.image %>"
          alt="<%= project.name %>"
          style="
            width: 100%;
            height: 200px;
            object-fit: cover;
            border: 1px solid #ddd;
          "
        />
        <% } %>
      </div>
      <% }) %>
    </div>

    <!-- Pagination Controls -->
    <div id="pagination" style="text-align: center; margin-top: 30px"></div>
  </div>
  <style>
    .pagination-container {
      margin-top: 20px;
      display: flex;
      justify-content: center;
    }

    .pagination-button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
      margin: 0 5px;
      transition: background-color 0.3s;
    }

    .pagination-button.active {
      background-color: #0056b3;
    }

    .pagination-button:hover {
      background-color: #0056b3;
    }
  </style>
</main>

<%- include('partials/footer') %>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const itemsPerPage = 9; // Number of items to display per page (3x3 grid)
    const projectCards = document.querySelectorAll(".project-card");
    const paginationContainer = document.getElementById("pagination");
    const totalPages = Math.ceil(projectCards.length / itemsPerPage);

    // Function to display items for a specific page
    function displayPage(page) {
      // Hide all project cards initially
      projectCards.forEach((card) => {
        card.style.display = "none";
      });

      // Show project cards for the current page
      const start = (page - 1) * itemsPerPage;
      const end = Math.min(start + itemsPerPage, projectCards.length);

      for (let i = start; i < end; i++) {
        projectCards[i].style.display = "block";
      }
    }

    // Function to create pagination buttons
    function createPagination() {
      // Clear previous pagination buttons
      paginationContainer.innerHTML = "";

      for (let i = 1; i <= totalPages; i++) {
        const button = document.createElement("button");
        button.textContent = i;
        button.classList.add("pagination-button");
        if (i === 1) button.classList.add("active");

        // Add click event listener for pagination buttons
        button.addEventListener("click", function () {
          // Remove active class from all buttons
          document.querySelectorAll(".pagination-button").forEach((btn) => {
            btn.classList.remove("active");
          });

          // Add active class to the clicked button
          button.classList.add("active");

          // Show items for the selected page
          displayPage(i);
        });

        paginationContainer.appendChild(button);
      }
    }

    // Initialize the pagination
    displayPage(1); // Show the first page by default
    createPagination();
  });
</script>
